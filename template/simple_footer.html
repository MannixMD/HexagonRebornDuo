	</div>

	<div class="copyright" role="contentinfo">
		<p class="footer-row">
			<span class="footer-copyright">{{ CREDIT_LINE }}</span>
		</p>
		{% if TRANSLATION_INFO %}
			<p class="footer-row">
				<span class="footer-copyright">{{ TRANSLATION_INFO }}</span>
			</p>
		{% endif %}
		{% if DEBUG_OUTPUT %}
			<p class="footer-row">
				<span class="footer-info">{{ DEBUG_OUTPUT }}</span>
			</p>
		{% endif %}
	</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="{L_AJAX_ERROR_TITLE}" data-ajax-error-text="{L_AJAX_ERROR_TEXT}" data-ajax-error-text-abort="{L_AJAX_ERROR_TEXT_ABORT}" data-ajax-error-text-timeout="{L_AJAX_ERROR_TEXT_TIMEOUT}" data-ajax-error-text-parsererror="{L_AJAX_ERROR_TEXT_PARSERERROR}">
		<div id="darken" class="darken">&nbsp;</div>
	</div>
	<div id="loading_indicator" class="loading_indicator"></div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="{L_ERROR}" data-l-timeout-processing-req="{L_TIMEOUT_PROCESSING_REQ}">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_confirm phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

<script src="{T_JQUERY_LINK}"></script>
<!-- IF S_ALLOW_CDN --><script>window.jQuery || document.write('\x3Cscript src="{T_ASSETS_PATH}/javascript/jquery-3.6.0.min.js?assets_version={T_ASSETS_VERSION}">\x3C/script>');</script><!-- ENDIF -->
<script src="{T_ASSETS_PATH}/javascript/core.js?assets_version={T_ASSETS_VERSION}"></script>
<!-- INCLUDEJS forum_fn.js -->
<!-- INCLUDEJS ajax.js -->

<!-- EVENT simple_footer_after -->

{% if definition.THEMESWITCHER == 'yes'%}
<script>
// Checks if user has set prefered theme color if not set one corresponding to user's browser/system setting
const colorSchemeQueryList = window.matchMedia('(prefers-color-scheme: dark)');

if (localStorage.getItem("ThemePref") == null) {

	const setColorScheme = e => {
	  if ( e.matches ) {
		setDarkTheme()
		localStorage.setItem("Theme", 'Dark');
		return
	  }
	  if ( !e.matches ) {
		setLightTheme()
		localStorage.setItem("Theme", 'Light');
		return
	  }
	}
	setColorScheme(colorSchemeQueryList);
	colorSchemeQueryList.addEventListener('change', setColorScheme);
	console.log("1st")

}else if (localStorage.getItem("Theme") == 'Dark' && localStorage.getItem("ThemePref") == 'Dark'){
	setDarkTheme()
	// localStorage.setItem("ThemePref", 'Dark')
	console.log("2nd")


}else if (localStorage.getItem("Theme") == 'Light' && localStorage.getItem("ThemePref") == 'Light') {
	setLightTheme()
	// localStorage.setItem("ThemePref", 'Light')
	console.log("3rd")

}else if (localStorage.getItem("Theme") == 'Dark' && localStorage.getItem("ThemePref") == 'Light'){
	setLightTheme();
	console.log("4th")
}else {
	setDarkTheme();
	console.log("5th")
}
// function to set the Dark theme
function setDarkTheme() {
	document.documentElement.style.setProperty("--bg-clr", '#000000');
    document.documentElement.style.setProperty("--main-clr", '#171717');
    document.documentElement.style.setProperty("--sec-clr", '#262626');
    document.documentElement.style.setProperty("--txt-clr", '#e9ebee');
    document.documentElement.style.setProperty("--extra-clr", '#101010');
	document.documentElement.setAttribute('data-theme', 'dark');
	const metaColorScheme = document.querySelector(`meta[name="color-scheme"]`)
	metaColorScheme.content = "Dark";
	
}
// function to set the Light theme 
function setLightTheme() {
	document.documentElement.style.setProperty("--bg-clr", '#ffffff');
    document.documentElement.style.setProperty("--main-clr", '#e8e8e8');
    document.documentElement.style.setProperty("--sec-clr", '#d9d9d9');
    document.documentElement.style.setProperty("--txt-clr", '#161411');
    document.documentElement.style.setProperty("--extra-clr", '#efefef');
	document.documentElement.setAttribute('data-theme', 'light');
	const metaColorScheme = document.querySelector(`meta[name="color-scheme"]`);
	metaColorScheme.content = "Light";
}
	// applies accent color to radio buttons except for colorPicker
	const radioss = document.querySelectorAll('input[type="radio"]:not([name="theme"])');
	radioss.forEach(radio =>{
		radio.style.accentColor = "var(--accent-color)"
	})
</script>

{% endif %}

{$SCRIPTS}

{% EVENT simple_footer_body_after %}

</body>
</html>
